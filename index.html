<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>技術別作業時間入力</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>📝 技術別作業時間入力</h1>
            <p class="subtitle">日々の学習・開発時間を記録しよう</p>
        </header>

        <!-- 通知エリア -->
        <div id="notification" class="notification"></div>

        <main>
            <!-- CSVインポート -->
            <section class="import-section">
                <h2>📥 CSVインポート</h2>
                <div class="import-area">
                    <label for="importFile" class="btn btn-import">
                        📂 CSVファイルを選択
                    </label>
                    <input type="file" id="importFile" accept=".csv" style="display: none;">
                    <p class="io-note">過去のCSVファイルを読み込んで追加します</p>
                </div>
            </section>

            <!-- 週の設定 -->
            <section class="week-section">
                <div class="week-info">
                    <h3>📅 対象週</h3>
                    <div class="week-display">
                        <span>週の開始日（月曜日）:</span>
                        <input type="date" id="weekStartDate" class="week-date-input">
                        <button type="button" class="btn btn-secondary btn-small" id="setThisWeekBtn">今週に設定</button>
                    </div>
                    <p class="week-note">※ この週のデータとして記録されます</p>
                </div>
            </section>

            <!-- 技術分野設定 -->
            <section class="config-section">
                <div class="section-header">
                    <h2>⚙️ 技術分野設定</h2>
                    <button id="toggleConfigBtn" class="btn btn-secondary">表示</button>
                </div>
                <div id="configDisplay" class="config-display" style="display: none;">
                    <p class="placeholder">設定を読み込んでいます...</p>
                </div>
            </section>

            <!-- 入力フォーム -->
            <section class="input-section">
                <h2>📝 作業時間を入力</h2>
                <form id="entryForm" class="entry-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">技術分野（大分類）</label>
                            <select id="category" name="category" required>
                                <option value="">選択してください</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="subcategory">小分類</label>
                            <select id="subcategory" name="subcategory" required disabled>
                                <option value="">まず技術分野を選択してください</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="hours">作業時間</label>
                            <div class="input-with-unit">
                                <input type="number" id="hours" name="hours" step="0.1" min="0.1" required>
                                <span class="unit">時間</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="memo">メモ（具体的な作業内容）</label>
                        <textarea id="memo" name="memo" rows="3" placeholder="例: 共有メモリ(shmget/shmat)、セマフォ(semget/semop)の実装と動作確認"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submitBtn">
                            <span id="submitBtnText">➕ 追加</span>
                        </button>
                        <button type="button" class="btn btn-secondary" id="clearBtn">🔄 クリア</button>
                    </div>
                </form>
            </section>

            <!-- データ一覧 -->
            <section class="list-section">
                <div class="list-header">
                    <h2>📋 入力済みデータ（今週）</h2>
                    <div class="list-controls">
                        <button class="btn btn-danger-outline" id="clearAllBtn">🗑️ 全削除</button>
                    </div>
                </div>
                <div id="dataList" class="data-list">
                    <p class="placeholder">まだデータがありません。上のフォームから作業時間を入力してください。</p>
                </div>
            </section>

            <!-- CSVエクスポート -->
            <section class="export-section">
                <h2>📤 CSVエクスポート</h2>
                <div class="export-area">
                    <button class="btn btn-export" id="exportWeekBtn">
                        💾 今週のデータをダウンロード
                    </button>
                    <p class="io-note">今週（月〜日）のデータをCSVファイルとしてダウンロードします</p>
                </div>
            </section>
        </main>

        <footer>
            <p>💡 ヒント: 入力したデータは自動的にブラウザに保存されます。定期的にCSVでバックアップすることをおすすめします。</p>
            <p>作成日: 2025-11-30</p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/dataManager.js"></script>
    <script src="js/csvExporter.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
