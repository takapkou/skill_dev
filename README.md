# 技術別作業時間入力アプリ

日々の技術学習・開発の作業時間を簡単に記録し、CSV形式でエクスポートするWebアプリケーションです。

## 📋 機能

- **簡単入力**: 日付・技術分野・小分類・作業時間・メモを5ステップで入力
- **自動保存**: ブラウザのlocalStorageに自動的にデータを保存
- **編集・削除**: 入力済みデータの編集・削除が可能
- **設定表示**: 現在の技術分野設定を確認 ⭐NEW
- **CSVインポート**: 過去のCSVファイルを読み込んで追加
- **週別CSVエクスポート**: 今週のデータをCSVファイルで出力
- **フィルター機能**: 期間でデータを絞り込み表示
- **レスポンシブデザイン**: PC・タブレット・スマホに対応

## 🚀 使い方

### 1. アプリケーションの起動

`index.html` をブラウザで開くだけで使用できます。

```bash
# ファイルをダブルクリック、または
start index.html
```

### 2. データの入力

#### 基本的な流れ
1. **日付**: 作業日を選択（デフォルト: 今日）
2. **技術分野**: 大分類を選択
3. **小分類**: 小分類を選択（技術分野により自動更新）
4. **作業時間**: 時間を入力（0.1時間単位）
5. **メモ**: 具体的な作業内容を記入（任意）
6. **➕ 追加**ボタンをクリック

#### メモの書き方

メモには**小分類よりも具体的な技術内容**を記載します。

```
✅ 良い例:
- 共有メモリ(shmget/shmat)、セマフォ(semget/semop)の実装と動作確認
- SPI通信のDMA転送実装、デバイスツリー設定

❌ 悪い例:
- プロセス間通信の勉強
- 通信処理
```

### 3. データの管理

#### データ一覧
- 入力したデータは日付降順で一覧表示されます
- **✏️ 編集**: データを修正できます
- **🗑️ 削除**: データを削除できます（確認あり）

#### フィルター
- **すべて**: 全データを表示
- **今週**: 今週のデータのみ表示
- **今月**: 今月のデータのみ表示

### 4. 技術分野設定の確認

「⚙️ 技術分野設定」セクションで、現在読み込まれている設定を確認できます。

**使い方:**
1. 「表示」ボタンをクリック
2. 各技術分野の色と小分類一覧が表示されます
3. 「非表示」で閉じることができます

**表示内容:**
- 技術分野名
- 技術分野の色（カラーボックス）
- 小分類の数
- 小分類の一覧（タグ形式）

> この画面では確認のみで、編集はできません。設定を変更したい場合は `config.json` を直接編集してください。

### 5. データの入出力

画面下部の「💾 データの入出力」セクションで、CSVファイルのインポート・エクスポートができます。

#### 📥 CSVインポート
過去にエクスポートしたCSVファイルを読み込んで、データを追加できます。

**使い方:**
1. 「📥 CSVインポート」ボタンをクリック
2. CSVファイルを選択
3. 自動的にデータが追加されます

**注意事項:**
- 同じデータを重複してインポート可能（重複チェックはありません）
- CSVフォーマットが正しくない場合はエラーが表示されます
- config.jsonに存在しない技術分野・小分類はスキップされます

#### 📤 今週をエクスポート
今週（月曜日〜日曜日）のデータをCSVファイルでダウンロードします。

**使い方:**
1. 「� 今週をエクスポート」ボタンをクリック
2. `week_YYYY_WW.csv` がダウンロードされます
3. 週末に実行して、週ごとのデータを蓄積していきます

#### CSVフォーマット
```csv
日付,技術分野,小分類,作業時間(h),メモ
2024-10-28,Linuxアプリ,プロセス間通信,5.5,共有メモリ(shmget/shmat)、セマフォ(semget/semop)
2024-10-29,Linuxカーネル,デバイス制御,3.0,GPIO制御、platform_driverの実装
```

##  ファイル構成

```
技術別作業時間 入力/
├── index.html          # メインHTML
├── styles.css          # スタイルシート
├── config.json         # 技術分野設定（表示アプリと共通）
├── README.md           # このファイル
├── 要件定義.md         # 要件定義書
├── 設計書.md           # 設計ドキュメント
└── js/
    ├── config.js       # 設定管理
    ├── storage.js      # localStorage操作
    ├── dataManager.js  # データCRUD
    ├── csvExporter.js  # CSVエクスポート
    └── app.js          # メインアプリ
```

## ⚙️ 技術分野のカスタマイズ

### 設定の確認方法

アプリ内で「⚙️ 技術分野設定」セクションの「表示」ボタンをクリックすると、現在の設定を確認できます。

### 設定の変更方法

`config.json` ファイルを直接編集することで技術分野を変更できます。

### config.json の例
```json
{
  "Linuxアプリ": {
    "color": "#4CAF50",
    "subcategories": [
      "プロセス間通信",
      "チップ間通信",
      "機器間通信"
    ]
  },
  "新しい技術分野": {
    "color": "#FF5722",
    "subcategories": [
      "小分類1",
      "小分類2"
    ]
  }
}
```

> **注意**: 表示アプリと同じ設定ファイルを使用することをおすすめします。

## 🔄 表示アプリとの連携

### 推奨ワークフロー

#### 通常の運用
1. **日次**: この入力アプリで毎日の作業時間を記録
2. **週末**: � 今週をエクスポート（週ごとのCSVファイルを作成）
3. **保存**: エクスポートしたCSVを表示アプリの `data` フォルダに配置
4. **分析**: 表示アプリで週別・月別の作業時間を可視化

#### データの復元・移行
- **バックアップから復元**: 📥 CSVインポートで過去のデータを読み込み
- **別のブラウザに移行**: エクスポート → 別ブラウザでインポート
- **PC間の移行**: エクスポート → 別PCでインポート

### データの流れ
```
[入力アプリ]
  データ入力
    ↓
  localStorage保存
    ↓
  CSVエクスポート
    ↓
  [表示アプリ]
  データ読み込み
    ↓
  グラフ表示（累計/週別/月別）
```

## 💡 ヒント

### データのバックアップ

入力したデータはブラウザのlocalStorageに保存されますが、以下の場合にデータが消える可能性があります：

- ブラウザのキャッシュクリア
- ブラウザの再インストール
- プライベートモードの使用

**定期的にCSVエクスポートすることをおすすめします！**

### 効率的な入力方法

1. **前回の選択を保持**: 技術分野と小分類は前回の選択が自動的に保持されます
2. **編集モード**: 間違って入力した場合は、✏️ボタンで修正できます
3. **連続入力**: 同じ技術分野の作業を続けて入力する場合、技術分野の選択は不要です

### 週末のルーチン

毎週末に以下の手順でデータを整理します：

1. 「� 今週をエクスポート」をクリック
2. ダウンロードされた `week_YYYY_WW.csv` を表示アプリの `data` フォルダに移動
3. 表示アプリで週別・月別の推移を確認

### インポート機能の活用

**こんな時に便利:**
- ブラウザのキャッシュをクリアしてデータが消えた → CSVから復元
- 別のPCで作業したい → CSVをコピーしてインポート
- スマホで入力したデータをPCに → CSVをメールで送ってインポート
- 過去の週のデータを修正したい → CSVを編集してインポート

### 週番号について

週番号はISO 8601形式を使用しています：
- 週の始まりは月曜日
- 年の最初の週は、木曜日を含む週

## 🧪 動作確認

### ブラウザ要件
- **推奨**: Chrome, Edge, Firefox の最新版
- **必須機能**: localStorage, Blob API

### データ互換性
出力されるCSVファイルは表示アプリと完全互換です。

## 🔧 トラブルシューティング

### データが保存されない
- ブラウザのlocalStorageが有効か確認してください
- プライベートモード（シークレットモード）では使用できません
- ブラウザの容量制限（通常5-10MB）を超えていないか確認してください

### CSVが文字化けする
- Excel で開く場合、UTF-8 BOM付きで出力されるため通常は問題ありません
- 文字化けする場合は、テキストエディタで開いて確認してください

### インポート時にエラーが出る
- CSVのフォーマットを確認してください（日付,技術分野,小分類,作業時間(h),メモ）
- config.json に存在しない技術分野・小分類は自動的にスキップされます
- 「有効なデータがありませんでした」と表示される場合は、config.json を確認してください

### 表示アプリでエラーが出る
- CSVのフォーマットを確認してください（日付,技術分野,小分類,作業時間(h),メモ）
- config.json が両アプリで一致しているか確認してください

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 👤 作成者

作成日: 2025-11-30

---

**お問い合わせ**: 不具合や改善要望があれば、issueを作成してください。
