# 技術別作業時間入力アプリ - 要件定義

## 1. 目的

技術分野ごとの作業時間データを簡単に入力し、CSV形式で保存するためのWebアプリケーション

## 2. 基本機能

### 2.1 データ入力
- **日付選択**: カレンダーUIで作業日を選択
- **技術分野選択**: ドロップダウンから大分類を選択
- **小分類選択**: 選択した大分類に応じた小分類を表示
- **作業時間入力**: 数値（小数可）で作業時間を入力
- **メモ入力**: 具体的な作業内容をテキストエリアで入力

### 2.2 データ管理
- **一覧表示**: 入力済みデータを日付順に表示
- **編集機能**: 既存データを修正
- **削除機能**: 不要なデータを削除
- **一時保存**: ブラウザのローカルストレージに自動保存

### 2.3 CSV出力
- **週単位エクスポート**: 指定した週のデータをCSVファイルとしてダウンロード
- **月単位エクスポート**: 指定した月のデータをCSVファイルとしてダウンロード
- **全データエクスポート**: すべてのデータを1つのCSVファイルに出力
- **ファイル名**: `week_YYYY_WW.csv` または `month_YYYY_MM.csv` 形式

### 2.4 設定管理
- **技術分野設定**: 表示アプリと同じ `config.json` を読み込み
- **設定同期**: 設定ファイルをアップロードして技術分野を更新可能

## 3. CSVフォーマット

出力するCSVファイルは表示アプリと互換性を持つ：

```csv
日付,技術分野,小分類,作業時間(h),メモ
2024-10-28,Linuxアプリ,プロセス間通信,5.5,共有メモリ(shmget/shmat)、セマフォ(semget/semop)
2024-10-29,Linuxカーネル,デバイス制御,3.0,GPIO制御、platform_driverの実装
```

## 4. UI要件

### 4.1 レイアウト
- **入力フォーム**: 画面上部に固定
- **データ一覧**: スクロール可能な領域に表示
- **統計情報**: 週間/月間の合計時間を表示
- **エクスポートボタン**: 目立つ位置に配置

### 4.2 ユーザビリティ
- **デフォルト値**: 日付は今日、技術分野は前回選択したものを保持
- **バリデーション**: 必須項目の入力チェック
- **確認ダイアログ**: 削除時に確認メッセージを表示
- **成功通知**: データ保存・エクスポート時に通知

### 4.3 レスポンシブ対応
- PC、タブレット、スマートフォンで使用可能

## 5. 技術仕様

### 5.1 フロントエンド
- HTML5, CSS3, Vanilla JavaScript
- サーバー不要（完全にブラウザ上で動作）

### 5.2 データ保存
- **localStorage**: ブラウザのローカルストレージにJSON形式で保存
- **データ構造**:
```json
[
  {
    "id": "uuid",
    "date": "2024-10-28",
    "category": "Linuxアプリ",
    "subcategory": "プロセス間通信",
    "hours": 5.5,
    "memo": "共有メモリ、セマフォ実装"
  }
]
```

### 5.3 CSV生成
- JavaScript でCSV文字列を生成
- Blob APIでファイルとしてダウンロード

## 6. 非機能要件

### 6.1 パフォーマンス
- 1000件以上のデータでもスムーズに動作

### 6.2 データ永続化
- ブラウザを閉じてもデータを保持
- データのインポート/エクスポート機能でバックアップ可能

### 6.3 セキュリティ
- ローカル実行のため外部への通信なし
- データはユーザーのブラウザ内にのみ保存

## 7. 将来的な拡張

- データのインポート機能（CSV → localStorage）
- 複数週/月の一括エクスポート
- グラフプレビュー機能
- 表示アプリとの統合

## 8. 表示アプリとの連携

### 8.1 互換性
- 出力CSVフォーマットは表示アプリと完全互換
- 同じ `config.json` を共有可能

### 8.2 ワークフロー
1. 入力アプリで日々の作業時間を記録
2. 週/月単位でCSVエクスポート
3. エクスポートしたCSVを表示アプリの `data` フォルダに保存
4. 表示アプリで可視化・分析

## 9. 成功基準

- データ入力から保存まで5ステップ以内
- CSVエクスポートがワンクリックで完了
- 表示アプリでエラーなく読み込める
